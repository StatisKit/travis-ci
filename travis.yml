os:
  - linux
  - osx

sudo: required

env:
  - INSTALL=user_install
  - INSTALL=developer_install
  
install:
  - if [[ "$TRAVIS_OS_NAME" = "osx" ]]; then
      brew install python;
    else
      sudo apt-get install python2.7;
    fi
  - pip install pyinstaller
  
script:
  - git clone https://gist.github.com/8a8b5ea835ac3cf5c46f8e02b31f6f34.git install-scripts
  - cd install-scripts
  - pyinstaller $INSTALL.py --onefile
  - cd dist
  - if [[ "$INSTALL" = "developer_install" ]]; then
      ./$INSTALL --configure-only=yes --batch-mode=yes;
    else
      ./$INSTALL --batch-mode=yes;
    fi
  - bash ../../travis.sh
  
cache:
  directories:
  - $HOME/install-scripts/dist
